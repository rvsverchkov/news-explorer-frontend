[{"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\index.js":"1","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\reportWebVitals.js":"2","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\App.js":"3","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Main\\Main.js":"4","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Header\\Header.js":"5","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SearchForm\\Search.js":"6","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Results\\Results.js":"7","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js":"8","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\About\\About.js":"9","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Footer\\Footer.js":"10","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\LoginPopup\\LoginPopup.js":"11","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js":"12","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\RegisterPopup\\RegisterPopup.js":"13","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js":"14","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\NotFound\\NotFound.js":"15","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js":"16","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SavedNewsGrid\\SavedNewsGrid.js":"17","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\ButtonMenu\\ButtonMenu.js":"18","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\Token.js":"19","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\ExplorerAuth.js":"20","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\NewsApi.js":"21","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\contexts\\CurrentUserContext.js":"22","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js":"23","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\MainApi.js":"24"},{"size":624,"mtime":1611924015740,"results":"25","hashOfConfig":"26"},{"size":375,"mtime":1611924015741,"results":"27","hashOfConfig":"26"},{"size":9201,"mtime":1611943526664,"results":"28","hashOfConfig":"26"},{"size":4747,"mtime":1611939999996,"results":"29","hashOfConfig":"26"},{"size":1873,"mtime":1611924026865,"results":"30","hashOfConfig":"26"},{"size":1211,"mtime":1611924026873,"results":"31","hashOfConfig":"26"},{"size":1390,"mtime":1611942441081,"results":"32","hashOfConfig":"26"},{"size":2554,"mtime":1611943213736,"results":"33","hashOfConfig":"26"},{"size":517,"mtime":1611924015710,"results":"34","hashOfConfig":"26"},{"size":1087,"mtime":1611924015714,"results":"35","hashOfConfig":"26"},{"size":2747,"mtime":1611924026866,"results":"36","hashOfConfig":"26"},{"size":1304,"mtime":1611924026868,"results":"37","hashOfConfig":"26"},{"size":3554,"mtime":1611924026870,"results":"38","hashOfConfig":"26"},{"size":317,"mtime":1611924015722,"results":"39","hashOfConfig":"26"},{"size":460,"mtime":1611924015721,"results":"40","hashOfConfig":"26"},{"size":515,"mtime":1611924026871,"results":"41","hashOfConfig":"26"},{"size":1057,"mtime":1611924026872,"results":"42","hashOfConfig":"26"},{"size":1101,"mtime":1611924015712,"results":"43","hashOfConfig":"26"},{"size":260,"mtime":1611924015742,"results":"44","hashOfConfig":"26"},{"size":2232,"mtime":1611924026880,"results":"45","hashOfConfig":"26"},{"size":844,"mtime":1611924026881,"results":"46","hashOfConfig":"26"},{"size":86,"mtime":1611924026873,"results":"47","hashOfConfig":"26"},{"size":360,"mtime":1611924026869,"results":"48","hashOfConfig":"26"},{"size":1761,"mtime":1611924026881,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"1co9vto",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"52"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\index.js",[],["100","101"],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\reportWebVitals.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\App.js",["102"],"import { useEffect, useState } from 'react';\r\nimport { Route, Switch, useLocation, useHistory } from 'react-router-dom';\r\nimport Main from './Main/Main.js';\r\nimport LoginPopup from './LoginPopup/LoginPopup.js';\r\nimport RegisterPopup from './RegisterPopup/RegisterPopup.js';\r\nimport PopupWithForm from './PopupWithForm/PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport ProtectedRoute from './ProtectedRoute/ProtectedRoute.js';\r\nimport NewsApi from '../utils/NewsApi.js';\r\nimport * as explorerAuth from '../utils/ExplorerAuth.js';\r\nimport * as mainApi from '../utils/MainApi.js';\r\nimport * as token from '../utils/Token.js';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n\r\n  const history = useHistory();\r\n  const currentPath = useLocation();\r\n  const localStorageArray = JSON.parse(localStorage.getItem('results'));\r\n  const [isLoginPopupOpened, setLoginPopupOpened] = useState(false);\r\n  const [isRegisterPopupOpened, setRegisterPopupOpened] = useState(false);\r\n  const [isError, setError] = useState(false);\r\n  const [isLoggedIn, setLoggedIn] = useState(false);\r\n  const [isMenuOpen, setMenuOpen] = useState(false);\r\n  const [isCloseButton, setCloseButton] = useState(false);\r\n  const [resultCardsArray, setResultCardsArray] = useState([]);\r\n  const [isAlreadySearch, setAlreadySearch] = useState(false);\r\n  const [isSuccessSearch, setSuccessSearch] = useState(false);\r\n  const [isActiveHistory, setActiveHistory] = useState(false);\r\n  const [isShowResults, setShowResults] = useState(false);\r\n  const [isNotFound, setNotFound] = useState(false);\r\n  const [rowOfCards, setRowOfCards] = useState(1);\r\n  const [isSuccessRegistration, setSuccessRegistration] = useState(false);\r\n  const [savedCardsArray, setSavedCardsArray] = useState([]);\r\n  const [searchWord, setSearchWord] = useState('');\r\n  const [userData, setUserData] = useState({ id: '', email: '', name: '' });\r\n  const [currentUser, setCurrentUser] = useState({\r\n    name: '',\r\n    email: ''\r\n  })\r\n\r\n  const getSavedCards = () => {\r\n    const jwt = token.getToken();\r\n    mainApi.getSavedCards(jwt)\r\n      .then((response) => {\r\n        console.log(response);\r\n        setSavedCardsArray(response);\r\n      })\r\n  }\r\n\r\n  const handleRegister = (email, password, name) => {\r\n    explorerAuth.register(email, password, name)\r\n      .then((response) => {\r\n        console.log(`\r\n          Вы только что успешно зарегистрировали свой аккаунт в сервисе News Explorer со следующими данными:\r\n          Почтой с адресом ${response.email} и именем ${response.name}\r\n        `);\r\n        setSuccessRegistration(true);\r\n        setRegisterPopupOpened(false);\r\n      })\r\n      .catch((error) => {\r\n        console.log(`Регистрация не была завершена из - за ${error}`);\r\n      })\r\n  }\r\n\r\n  const handleLogin = (email, password) => {\r\n    explorerAuth.login(email, password)\r\n      .then((response) => {\r\n        console.log(response);\r\n        setLoginPopupOpened(false);\r\n        tokenCheck();\r\n      })\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    token.removeToken();\r\n    //localStorage.removeItem('results');\r\n    setLoggedIn(false);\r\n  }\r\n\r\n  const handleSaveCard = (currentCard) => {\r\n    tokenCheck();\r\n    getSavedCards();\r\n    const jwt = token.getToken();\r\n    mainApi.saveCurrentCard(\r\n      searchWord,\r\n      currentCard.title,\r\n      currentCard.description,\r\n      currentCard.publishedAt,\r\n      currentCard.source.name,\r\n      currentCard.url,\r\n      currentCard.urlToImage,\r\n      jwt\r\n    )\r\n      .then((response) => {\r\n        console.log(response)\r\n      })\r\n  }\r\n\r\n  const checkStorage = () => {\r\n    if (localStorageArray !== null && isSuccessSearch === false) {\r\n      setShowResults(true);\r\n      setActiveHistory(true);\r\n    }\r\n    if (localStorageArray !== null && isSuccessSearch === true) {\r\n      setShowResults(true);\r\n      setActiveHistory(false);\r\n    }\r\n  }\r\n\r\n  const handleDeleteCard = (currentCard) => {\r\n    const jwt = token.getToken();\r\n    const cardId = currentCard._id;\r\n    mainApi.deleteCurrentCard(\r\n      cardId, jwt\r\n    )\r\n      .then((response) => {\r\n        console.log(response)\r\n        getSavedCards();\r\n      })\r\n  }\r\n\r\n  const tokenCheck = () => {\r\n    getSavedCards();\r\n    checkStorage();\r\n    const jwt = token.getToken();\r\n    console.log(localStorageArray)\r\n    if (!jwt) {\r\n      return;\r\n    }\r\n    Promise.all([\r\n      explorerAuth.get(jwt),\r\n    ])\r\n      .then((response) => {\r\n        console.log(response);\r\n        setLoggedIn(true);\r\n        const [userData] = response;\r\n        setUserData(userData);\r\n        setCurrentUser(userData);\r\n        history.push('/');\r\n      })\r\n  }\r\n\r\n  const showMoreCards = () => {\r\n    setRowOfCards(rowOfCards + 1);\r\n  }\r\n\r\n  const closeAllPopups = () => {\r\n    setLoginPopupOpened(false);\r\n    setRegisterPopupOpened(false);\r\n    setSuccessRegistration(false);\r\n  }\r\n\r\n  const onSubmitSearch = (e, word) => {\r\n    e.preventDefault();\r\n    setError(false);\r\n    setAlreadySearch(true);\r\n    setSuccessSearch(false);\r\n    setNotFound(false);\r\n    setSearchWord('');\r\n    NewsApi.getArticles(word)\r\n      .then((response) => {\r\n        if (response.articles.length !== 0) {\r\n          setShowResults(true);\r\n          setActiveHistory(false);\r\n          setSearchWord(word);\r\n          console.log(response.articles.length);\r\n          setResultCardsArray(response.articles);\r\n          localStorage.setItem('results', JSON.stringify(response.articles));\r\n          setSuccessSearch(true);\r\n          setAlreadySearch(false);\r\n        } else {\r\n          setAlreadySearch(false);\r\n          setActiveHistory(false);\r\n          setSuccessSearch(false);\r\n          setShowResults(false)\r\n          setNotFound(true);\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setError(true);\r\n        setAlreadySearch(false);\r\n      })\r\n  }\r\n\r\n  const handleLoginPopupClick = () => {\r\n    setRegisterPopupOpened(false);\r\n    setLoginPopupOpened(!isLoginPopupOpened);\r\n    setSuccessRegistration(false);\r\n  }\r\n\r\n  const handleRegisterPopupClick = () => {\r\n    setLoginPopupOpened(false);\r\n    setRegisterPopupOpened(!isRegisterPopupOpened);\r\n  }\r\n\r\n  const handleLoggedInClick = (e) => {\r\n    e.preventDefault();\r\n    closeAllPopups();\r\n    setLoggedIn(!isLoggedIn);\r\n  }\r\n\r\n  const openMenu = () => {\r\n    setMenuOpen(!isMenuOpen);\r\n    setCloseButton(!isCloseButton);\r\n  }\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n    return () => {};\r\n  }, []);\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n            <Main \r\n              isCloseButton={isCloseButton} \r\n              isMain=\"true\" \r\n              openMenu={openMenu} \r\n              isMenuOpen={isMenuOpen} \r\n              onLoginPopup={handleLoginPopupClick} \r\n              isLoggedIn={!isLoggedIn} \r\n              isError={isError} \r\n              onSubmitSearch={onSubmitSearch}\r\n              resultCardsArray={resultCardsArray}\r\n              isAlreadySearch={isAlreadySearch}\r\n              isSuccessSearch={isSuccessSearch}\r\n              isNotFound={isNotFound}\r\n              showMoreCards={showMoreCards}\r\n              rowOfCards={rowOfCards}\r\n              name={userData.name}\r\n              handleLogout={handleLogout}\r\n              handleSaveCard={handleSaveCard}\r\n              getSavedCards={getSavedCards}\r\n              currentPath={currentPath}\r\n              handleDeleteCard={handleDeleteCard}\r\n              isActiveHistory={isActiveHistory}\r\n              localStorageArray={localStorageArray}\r\n              isShowResults={isShowResults}\r\n              savedCardsArray={savedCardsArray}\r\n            />\r\n          </Route>\r\n          <ProtectedRoute\r\n            path=\"/saved-news\"\r\n            isLoggedIn={!isLoggedIn}\r\n            component={Main}\r\n            name={userData.name}\r\n            handleLogout={handleLogout}\r\n            savedCardsArray={savedCardsArray}\r\n            currentPath={currentPath}\r\n            handleDeleteCard={handleDeleteCard}\r\n          />\r\n        </Switch>\r\n        <LoginPopup \r\n          isOpen={isLoginPopupOpened} \r\n          onClose={closeAllPopups} \r\n          onRegisterPopup={handleRegisterPopupClick} \r\n          handleLoggedInClick={handleLoggedInClick}\r\n          handleLogin={handleLogin}\r\n        />\r\n        <RegisterPopup \r\n          isOpen={isRegisterPopupOpened} \r\n          onClose={closeAllPopups} \r\n          onLoginPopup={handleLoginPopupClick} \r\n          handleLoggedInClick={handleLoggedInClick}\r\n          handleRegister={handleRegister}\r\n        />\r\n        <PopupWithForm\r\n          checkOpen={isSuccessRegistration}\r\n          isRegister={isSuccessRegistration}\r\n          disable='true'\r\n          title='Пользователь успешно зарегистрирован!'\r\n          name='register-success'\r\n          anotherAction='Войти'\r\n          onClose={closeAllPopups}\r\n          onAnotherAction={handleLoginPopupClick}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Main\\Main.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Header\\Header.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SearchForm\\Search.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Results\\Results.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\About\\About.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Footer\\Footer.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\LoginPopup\\LoginPopup.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\RegisterPopup\\RegisterPopup.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\NotFound\\NotFound.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\SavedNewsGrid\\SavedNewsGrid.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\ButtonMenu\\ButtonMenu.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\Token.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\ExplorerAuth.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\NewsApi.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\contexts\\CurrentUserContext.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js",[],"C:\\Users\\Роман\\Desktop\\news-explorer-frontend\\src\\utils\\MainApi.js",[],{"ruleId":"103","replacedBy":"104"},{"ruleId":"105","replacedBy":"106"},{"ruleId":"107","severity":1,"message":"108","line":211,"column":6,"nodeType":"109","endLine":211,"endColumn":8,"suggestions":"110"},"no-native-reassign",["111"],"no-negated-in-lhs",["112"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'tokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["113"],"no-global-assign","no-unsafe-negation",{"desc":"114","fix":"115"},"Update the dependencies array to be: [tokenCheck]",{"range":"116","text":"117"},[6434,6436],"[tokenCheck]"]